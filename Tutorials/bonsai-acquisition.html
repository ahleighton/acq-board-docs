

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Bonsai with the OE Board &#8212; Acquisition Board Docs 0.0.0 documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/_static/theme_overrides.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../index.html">
      <img src="../_static/oe_logo_name.svg" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../User-Manual/index.html">User Manual</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../Build-Instructions/index.html">Build Instructions</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="index.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../FAQ/index.html">FAQs</a>
        </li>
        
        
        <li class="nav-item">
            <a class="nav-link nav-external" href="https://open-ephys.org">Open Ephys<i class="fas fa-external-link-alt"></i></a>
        </li>
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/open-ephys" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/openephys" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <span class="target" id="bonsaiacq"></span><div class="section" id="using-bonsai-with-the-oe-board">
<h1>Using Bonsai with the OE Board<a class="headerlink" href="#using-bonsai-with-the-oe-board" title="Permalink to this headline">¶</a></h1>
<ol class="arabic simple">
<li><p>Install Bonsai from <a class="reference external" href="https://bonsai-rx.org/">here</a>.</p></li>
<li><p>Click on:   Tools/ Manage Packages/</p></li>
</ol>
<blockquote>
<div><p>In the package manager, search for ‘Ephys’.</p>
<p>Install the Ephys and Ephys Design Library.</p>
</div></blockquote>
<a class="reference internal image-reference" href="../_images/install_ephys_packages.png"><img alt="../_images/install_ephys_packages.png" class="align-center" src="../_images/install_ephys_packages.png" style="width: 500px;" /></a>
<ol class="arabic simple" start="3">
<li><p>The easiest place to start is with the example workflow for ephys.</p></li>
</ol>
<a class="reference internal image-reference" href="../_images/bonsai_ephys_example_install.png"><img alt="../_images/bonsai_ephys_example_install.png" class="align-center" src="../_images/bonsai_ephys_example_install.png" style="width: 500px;" /></a>
<ol class="arabic simple" start="4">
<li><p>Replace the bitfile</p></li>
</ol>
<p>Click on the ‘Rhd200EvalBoard’ node to select it. On the right hand side, you will see a column where you can configure the properties of that node.
Click on the ‘…’ to replace the default rhd2000_usb3.bit file with the rhd2000_usb3.bit file that is present in the installation of the Open Ephys GUI (if you have installed the GUI from here, you should find it in the installation folder).</p>
<a class="reference internal image-reference" href="../_images/select_bitfile.png"><img alt="../_images/select_bitfile.png" class="align-center" src="../_images/select_bitfile.png" style="width: 500px;" /></a>
<ol class="arabic simple" start="5">
<li><p>Stream data</p></li>
</ol>
<p>Make sure your Open Ephys Acquisition Board and a headstage are connected. You can use the headstage without an animal to perform test recordings, just using the noise that the headstage will pick up. Click ‘Start’ to run the workflow. Double-click on each node (circle) to open the visualiser at that point in the workflow, so that you can see what each step is doing.</p>
<ol class="arabic simple" start="6">
<li><p>Customize Workflow</p></li>
</ol>
<p>The example selects only channel 1 and 2 using the ‘Select Channel’ node. Add all the channels you are interested in and run the workflow again. Use Page Up and Page Down to scroll through the pages of the visualiser.</p>
<p>Make sure you also check and if necessary adjust the settings for the frequency filter and spike detector.</p>
<p>You can extract more types of data from the board by right-clicking on the ‘Rhd200EvalBoard’ node. You can choose to visualise incoming TTL inputs, the auxiliary data from the headstage etc.</p>
<ol class="arabic simple" start="7">
<li><p>Check that your data is being saved</p></li>
</ol>
<p>In Bonsai, data will only be saved if there is a purple ‘sink’ node at the end of the workflow. In the example, the ephys channel data is being saved in a .bin file that you can open in, for instance, Python or MATLAB. The extracted spikes are saved as a .csv that you can open in e.g. excel.</p>
<p>If you want to record incoming TTL timestamps you can add a branch as follows:</p>
<a class="reference internal image-reference" href="../_images/save_ttl_timestamp.png"><img alt="../_images/save_ttl_timestamp.png" class="align-center" src="../_images/save_ttl_timestamp.png" style="width: 500px;" /></a>
<p>Before recording a real experiment, always do a trial recording to make sure your data is being saved, and that when you open it, it contains the expected number of channels etc. You can do this without an animal, just using noise recorded from the headstage.</p>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                

              </div>
              
          </main>
          

      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2010-2021, Open Ephys &amp; Contributors.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>